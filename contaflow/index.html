<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContaFlow — SaaS para Escritórios de Contabilidade</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        /* ============================================
           CONTAFLOW v3 — COMPLETE STYLES
           ============================================ */
        :root {
            --primary: #1E40AF;
            --primary-light: #3B82F6;
            --primary-dark: #1E3A8A;
            --sidebar-bg: #0F172A;
            --sidebar-hover: #1E293B;
            --sidebar-active: #1E40AF;
            --bg: #FAFBFC;
            --bg-white: #FFFFFF;
            --green: #059669;
            --green-light: #D1FAE5;
            --yellow: #D97706;
            --yellow-light: #FEF3C7;
            --red: #DC2626;
            --red-light: #FEE2E2;
            --text-primary: #1E293B;
            --text-secondary: #64748B;
            --text-muted: #94A3B8;
            --border: #E2E8F0;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --radius: 12px;
            --radius-sm: 8px;
            --radius-xs: 6px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* ============================================
           LAYOUT
           ============================================ */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* ============================================
           SIDEBAR
           ============================================ */
        .sidebar {
            width: 260px;
            background: var(--sidebar-bg);
            color: #CBD5E1;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .sidebar-brand {
            padding: 24px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-brand .brand-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            font-weight: 800;
        }

        .sidebar-brand h1 {
            font-size: 20px;
            font-weight: 700;
            color: #F1F5F9;
            letter-spacing: -0.5px;
        }

        .sidebar-brand span {
            font-size: 11px;
            color: var(--text-muted);
            display: block;
            margin-top: 2px;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            overflow-y: auto;
        }

        .sidebar-section-title {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: #475569;
            padding: 12px 12px 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 11px 14px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            font-weight: 500;
            color: #94A3B8;
            margin-bottom: 2px;
            position: relative;
        }

        .nav-item:hover {
            background: var(--sidebar-hover);
            color: #E2E8F0;
        }

        .nav-item.active {
            background: var(--sidebar-active);
            color: #FFFFFF;
            box-shadow: 0 2px 8px rgba(30,64,175,0.4);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 15px;
        }

        .nav-item .badge {
            margin-left: auto;
            background: var(--red);
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 2px 7px;
            border-radius: 10px;
            min-width: 20px;
            text-align: center;
        }

        .nav-item .badge.green {
            background: var(--green);
        }

        .nav-item .badge.yellow {
            background: var(--yellow);
        }

        .sidebar-footer {
            padding: 16px 12px;
            border-top: 1px solid rgba(255,255,255,0.08);
        }

        .sidebar-user {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: background 0.2s;
        }

        .sidebar-user:hover {
            background: var(--sidebar-hover);
        }

        .sidebar-user .avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary), #7C3AED);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            color: white;
        }

        .sidebar-user .user-info {
            flex: 1;
        }

        .sidebar-user .user-info .name {
            font-size: 13px;
            font-weight: 600;
            color: #E2E8F0;
        }

        .sidebar-user .user-info .role {
            font-size: 11px;
            color: #64748B;
        }

        /* ============================================
           MAIN CONTENT
           ============================================ */
        .main-content {
            flex: 1;
            margin-left: 260px;
            min-height: 100vh;
        }

        /* ============================================
           TOP HEADER
           ============================================ */
        .top-header {
            background: var(--bg-white);
            border-bottom: 1px solid var(--border);
            padding: 0 32px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 20px;
            color: var(--text-primary);
            cursor: pointer;
            padding: 8px;
        }

        .page-title-header h2 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .page-title-header p {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 1px;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-search {
            position: relative;
            margin-right: 8px;
        }

        .header-search input {
            padding: 8px 12px 8px 36px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-family: inherit;
            width: 240px;
            background: var(--bg);
            transition: all 0.2s;
        }

        .header-search input:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(59,130,246,0.1);
            width: 300px;
        }

        .header-search i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 13px;
        }

        .header-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-sm);
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.2s;
        }

        .header-btn:hover {
            background: var(--bg);
            color: var(--text-primary);
        }

        .header-btn .notif-dot {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: var(--red);
            border-radius: 50%;
            border: 2px solid white;
        }

        /* ============================================
           PAGE CONTAINER
           ============================================ */
        .page-container {
            padding: 24px 32px 40px;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ============================================
           CARDS BASE
           ============================================ */
        .card {
            background: var(--bg-white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow-sm);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-header h3 {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .card-header .card-action {
            font-size: 13px;
            color: var(--primary);
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
        }

        .card-header .card-action:hover {
            text-decoration: underline;
        }

        /* ============================================
           KPI CARDS
           ============================================ */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .kpi-card {
            background: var(--bg-white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 22px 24px;
            box-shadow: var(--shadow-sm);
            transition: all 0.2s;
            cursor: default;
        }

        .kpi-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .kpi-card .kpi-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .kpi-card .kpi-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .kpi-icon.blue {
            background: #EFF6FF;
            color: var(--primary);
        }

        .kpi-icon.green {
            background: var(--green-light);
            color: var(--green);
        }

        .kpi-icon.yellow {
            background: var(--yellow-light);
            color: var(--yellow);
        }

        .kpi-icon.red {
            background: var(--red-light);
            color: var(--red);
        }

        .kpi-card .kpi-trend {
            font-size: 12px;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: 20px;
        }

        .kpi-trend.up {
            background: var(--green-light);
            color: var(--green);
        }

        .kpi-trend.down {
            background: var(--red-light);
            color: var(--red);
        }

        .kpi-card .kpi-value {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-primary);
            line-height: 1;
            margin-bottom: 4px;
        }

        .kpi-card .kpi-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* ============================================
           CHARTS GRID
           ============================================ */
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .chart-wrapper {
            position: relative;
            height: 280px;
        }

        .chart-wrapper canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* ============================================
           PROGRESS BARS (OBRIGAÇÕES)
           ============================================ */
        .obligations-progress {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .obligation-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .obligation-item .obl-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .obligation-item .obl-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .obligation-item .obl-status {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .progress-bar {
            height: 8px;
            background: #E2E8F0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }

        .progress-fill.green { background: var(--green); }
        .progress-fill.yellow { background: var(--yellow); }
        .progress-fill.red { background: var(--red); }
        .progress-fill.blue { background: var(--primary-light); }

        /* ============================================
           ACTIVITY FEED
           ============================================ */
        .activity-list {
            display: flex;
            flex-direction: column;
        }

        .activity-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-top: 6px;
            flex-shrink: 0;
        }

        .activity-dot.blue { background: var(--primary-light); }
        .activity-dot.green { background: var(--green); }
        .activity-dot.yellow { background: var(--yellow); }
        .activity-dot.red { background: var(--red); }

        .activity-text {
            font-size: 13px;
            color: var(--text-primary);
            line-height: 1.5;
        }

        .activity-text strong {
            font-weight: 600;
        }

        .activity-time {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* ============================================
           TABLES
           ============================================ */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead th {
            text-align: left;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            padding: 12px 16px;
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
            background: var(--bg);
        }

        tbody td {
            padding: 14px 16px;
            font-size: 13px;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
        }

        tbody tr {
            transition: background 0.15s;
        }

        tbody tr:hover {
            background: #F8FAFC;
        }

        /* ============================================
           STATUS BADGES
           ============================================ */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-badge.active, .status-badge.entregue {
            background: var(--green-light);
            color: var(--green);
        }

        .status-badge.pending, .status-badge.pendente {
            background: var(--yellow-light);
            color: var(--yellow);
        }

        .status-badge.overdue, .status-badge.atrasado {
            background: var(--red-light);
            color: var(--red);
        }

        .status-badge.inactive {
            background: #F1F5F9;
            color: #64748B;
        }

        .status-badge i {
            font-size: 8px;
        }

        /* ============================================
           FILTERS BAR
           ============================================ */
        .filters-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-group label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .filter-select, .filter-input {
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius-xs);
            font-size: 13px;
            font-family: inherit;
            background: white;
            color: var(--text-primary);
            cursor: pointer;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(59,130,246,0.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 9px 18px;
            border-radius: var(--radius-xs);
            font-size: 13px;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            box-shadow: var(--shadow-md);
        }

        .btn-outline {
            background: white;
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-outline:hover {
            background: var(--bg);
            border-color: #CBD5E1;
        }

        .btn-success {
            background: var(--green);
            color: white;
        }

        .btn-success:hover {
            background: #047857;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* ============================================
           CLIENTES — CARD EXPANDÍVEL
           ============================================ */
        .client-row {
            cursor: pointer;
        }

        .client-expand {
            display: none;
            background: #F8FAFC;
            border-bottom: 1px solid var(--border);
        }

        .client-expand.show {
            display: table-row;
        }

        .client-expand td {
            padding: 20px 16px;
        }

        .client-detail-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .client-detail-item {
            padding: 12px;
            background: white;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
        }

        .client-detail-item .detail-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .client-detail-item .detail-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ============================================
           OBRIGAÇÕES — CALENDÁRIO
           ============================================ */
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .calendar-nav button {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-xs);
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .calendar-nav button:hover {
            background: var(--bg);
            border-color: var(--primary-light);
            color: var(--primary);
        }

        .calendar-nav .month-year {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            min-width: 200px;
            text-align: center;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: var(--border);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .calendar-day-header {
            background: var(--bg);
            padding: 10px 8px;
            text-align: center;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-secondary);
            letter-spacing: 0.5px;
        }

        .calendar-day {
            background: white;
            padding: 8px;
            min-height: 100px;
            position: relative;
        }

        .calendar-day.empty {
            background: #F8FAFC;
        }

        .calendar-day.today {
            background: #EFF6FF;
        }

        .calendar-day .day-number {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .calendar-day.today .day-number {
            background: var(--primary);
            color: white;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .calendar-event {
            font-size: 10px;
            font-weight: 600;
            padding: 3px 6px;
            border-radius: 4px;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
        }

        .calendar-event.entregue {
            background: var(--green-light);
            color: var(--green);
        }

        .calendar-event.pendente {
            background: var(--yellow-light);
            color: var(--yellow);
        }

        .calendar-event.atrasado {
            background: var(--red-light);
            color: var(--red);
        }

        .calendar-legend {
            display: flex;
            gap: 20px;
            margin-top: 16px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 3px;
        }

        .legend-dot.green { background: var(--green); }
        .legend-dot.yellow { background: var(--yellow); }
        .legend-dot.red { background: var(--red); }

        /* ============================================
           FILTER CHIPS
           ============================================ */
        .filter-chips {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .filter-chip {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid var(--border);
            background: white;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-chip:hover, .filter-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* ============================================
           DOCUMENTOS — GRID
           ============================================ */
        .docs-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .doc-category-card {
            background: var(--bg-white);
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 24px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .doc-category-card:hover {
            border-color: var(--primary-light);
            background: #EFF6FF;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .doc-category-card.drag-over {
            border-color: var(--primary);
            background: #DBEAFE;
            border-style: solid;
        }

        .doc-category-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin: 0 auto 12px;
        }

        .doc-category-icon.xml { background: #EFF6FF; color: var(--primary); }
        .doc-category-icon.bank { background: var(--green-light); color: var(--green); }
        .doc-category-icon.receipt { background: var(--yellow-light); color: var(--yellow); }
        .doc-category-icon.guide { background: var(--red-light); color: var(--red); }

        .doc-category-card h4 {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .doc-category-card p {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .doc-count {
            font-size: 20px;
            font-weight: 800;
            color: var(--primary);
        }

        .doc-list-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            transition: background 0.15s;
        }

        .doc-list-item:hover {
            background: #F8FAFC;
        }

        .doc-file-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .doc-file-icon.xml { background: #EFF6FF; color: var(--primary); }
        .doc-file-icon.pdf { background: var(--red-light); color: var(--red); }
        .doc-file-icon.xls { background: var(--green-light); color: var(--green); }
        .doc-file-icon.img { background: var(--yellow-light); color: var(--yellow); }

        .doc-file-info {
            flex: 1;
        }

        .doc-file-info .filename {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .doc-file-info .file-meta {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* ============================================
           DRAG & DROP AREA
           ============================================ */
        .drop-zone {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 40px;
            text-align: center;
            margin-bottom: 24px;
            transition: all 0.3s;
            cursor: pointer;
            background: white;
        }

        .drop-zone:hover, .drop-zone.drag-over {
            border-color: var(--primary-light);
            background: #EFF6FF;
        }

        .drop-zone i {
            font-size: 40px;
            color: var(--primary-light);
            margin-bottom: 12px;
        }

        .drop-zone h4 {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .drop-zone p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* ============================================
           FINANCEIRO — EXTRA STYLES
           ============================================ */
        .finance-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .finance-card {
            background: var(--bg-white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 22px;
            box-shadow: var(--shadow-sm);
        }

        .finance-card .fc-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
            margin-bottom: 8px;
        }

        .finance-card .fc-value {
            font-size: 26px;
            font-weight: 800;
            color: var(--text-primary);
        }

        .finance-card .fc-sub {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .finance-card .fc-value.green { color: var(--green); }
        .finance-card .fc-value.red { color: var(--red); }

        /* ============================================
           PORTAL DO CLIENTE
           ============================================ */
        .portal-preview {
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .portal-header-bar {
            background: var(--primary);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: white;
        }

        .portal-header-bar h3 {
            font-size: 16px;
            font-weight: 700;
        }

        .portal-header-bar .company-name {
            font-size: 13px;
            font-weight: 500;
            opacity: 0.9;
        }

        .portal-body {
            padding: 24px;
        }

        .portal-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .portal-section {
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-bottom: 16px;
        }

        .portal-section h4 {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .portal-section h4 i {
            color: var(--primary);
        }

        .guia-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: var(--bg);
            border-radius: var(--radius-xs);
            margin-bottom: 8px;
        }

        .guia-item .guia-info h5 {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .guia-item .guia-info p {
            font-size: 11px;
            color: var(--text-muted);
        }

        .guia-item .guia-value {
            font-size: 15px;
            font-weight: 700;
            color: var(--primary);
        }

        .btn-download {
            padding: 5px 10px;
            border: 1px solid var(--primary-light);
            border-radius: var(--radius-xs);
            background: transparent;
            color: var(--primary);
            font-size: 11px;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.2s;
        }

        .btn-download:hover {
            background: var(--primary);
            color: white;
        }

        /* CHAT SIMULADO */
        .chat-window {
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            overflow: hidden;
        }

        .chat-header {
            background: var(--primary);
            color: white;
            padding: 12px 16px;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chat-header .online-dot {
            width: 8px;
            height: 8px;
            background: #4ADE80;
            border-radius: 50%;
        }

        .chat-messages {
            padding: 16px;
            height: 260px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: #F8FAFC;
        }

        .chat-msg {
            max-width: 80%;
            padding: 10px 14px;
            border-radius: 12px;
            font-size: 13px;
            line-height: 1.5;
        }

        .chat-msg.received {
            background: white;
            border: 1px solid var(--border);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .chat-msg.sent {
            background: var(--primary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .chat-msg .msg-time {
            font-size: 10px;
            opacity: 0.6;
            margin-top: 4px;
        }

        .chat-input {
            display: flex;
            border-top: 1px solid var(--border);
            background: white;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: none;
            font-size: 13px;
            font-family: inherit;
            outline: none;
        }

        .chat-input button {
            padding: 12px 18px;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        .chat-input button:hover {
            background: var(--primary-dark);
        }

        /* ============================================
           GRID HELPERS
           ============================================ */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .mb-20 { margin-bottom: 20px; }
        .mb-24 { margin-bottom: 24px; }

        /* ============================================
           TABS
           ============================================ */
        .tabs-bar {
            display: flex;
            gap: 4px;
            border-bottom: 2px solid var(--border);
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 10px 18px;
            font-size: 13px;
            font-weight: 600;
            font-family: inherit;
            color: var(--text-secondary);
            background: none;
            border: none;
            cursor: pointer;
            position: relative;
            transition: color 0.2s;
        }

        .tab-btn:hover {
            color: var(--primary);
        }

        .tab-btn.active {
            color: var(--primary);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary);
            border-radius: 1px;
        }

        /* ============================================
           REGIME TAGS
           ============================================ */
        .regime-tag {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .regime-tag.simples {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .regime-tag.presumido {
            background: #E0E7FF;
            color: #4338CA;
        }

        .regime-tag.real {
            background: #FEE2E2;
            color: #DC2626;
        }

        /* ============================================
           NOTIFICATION TOAST
           ============================================ */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--sidebar-bg);
            color: white;
            padding: 14px 20px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-weight: 500;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.4s ease;
            z-index: 9999;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast i {
            font-size: 16px;
        }

        /* ============================================
           EMPTY STATE
           ============================================ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state i {
            font-size: 48px;
            color: #CBD5E1;
            margin-bottom: 16px;
        }

        .empty-state h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .empty-state p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* ============================================
           MODAL
           ============================================ */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: var(--radius);
            padding: 32px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 25px 50px rgba(0,0,0,0.25);
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .modal p {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .modal .modal-actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        /* ============================================
           SCROLLBAR CUSTOM
           ============================================ */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #CBD5E1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94A3B8;
        }

        /* ============================================
           RESPONSIVE
           ============================================ */
        @media (max-width: 1024px) {
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .charts-grid {
                grid-template-columns: 1fr;
            }
            .docs-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .finance-summary {
                grid-template-columns: 1fr;
            }
            .portal-grid {
                grid-template-columns: 1fr;
            }
            .client-detail-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.open {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
            }
            .mobile-menu-btn {
                display: block;
            }
            .page-container {
                padding: 16px;
            }
            .top-header {
                padding: 0 16px;
            }
            .kpi-grid {
                grid-template-columns: 1fr;
            }
            .docs-grid {
                grid-template-columns: 1fr;
            }
            .header-search {
                display: none;
            }
            .grid-2 {
                grid-template-columns: 1fr;
            }
            .client-detail-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           ADDITIONAL DETAIL STYLES
           ============================================ */
        .cnpj-text {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .honorario-value {
            font-weight: 700;
            color: var(--green);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .section-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .stats-row {
            display: flex;
            gap: 24px;
            margin-bottom: 24px;
        }

        .stat-pill {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .stat-pill strong {
            color: var(--text-primary);
        }

        .action-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .fatura-status {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .fatura-status.pago { color: var(--green); }
        .fatura-status.aberto { color: var(--yellow); }
        .fatura-status.vencido { color: var(--red); }

        /* ============================================
           PRINT STYLES
           ============================================ */
        @media print {
            .sidebar, .top-header { display: none; }
            .main-content { margin-left: 0; }
        }

        /* ============================================
           MICRO-INTERACTIONS
           ============================================ */
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .hover-lift { transition: transform 0.2s, box-shadow 0.2s; }
        .hover-lift:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }

        /* Additional spacing and visual polish */
        .divider {
            height: 1px;
            background: var(--border);
            margin: 16px 0;
        }

        .text-right { text-align: right; }
        .text-center { text-align: center; }
        .font-mono { font-family: 'Courier New', monospace; }

        .icon-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .icon-circle.blue { background: #EFF6FF; color: var(--primary); }
        .icon-circle.green { background: var(--green-light); color: var(--green); }
        .icon-circle.yellow { background: var(--yellow-light); color: var(--yellow); }
        .icon-circle.red { background: var(--red-light); color: var(--red); }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ============================================
             SIDEBAR
             ============================================ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-brand">
                <div class="brand-icon"><i class="fas fa-chart-line"></i></div>
                <div>
                    <h1>ContaFlow</h1>
                    <span>Gestão Contábil</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="sidebar-section-title">Principal</div>
                <div class="nav-item active" data-page="dashboard" onclick="navigateTo('dashboard')">
                    <i class="fas fa-grid-2"></i>
                    Dashboard
                </div>
                <div class="nav-item" data-page="clientes" onclick="navigateTo('clientes')">
                    <i class="fas fa-building"></i>
                    Clientes
                    <span class="badge green">147</span>
                </div>
                <div class="nav-item" data-page="obrigacoes" onclick="navigateTo('obrigacoes')">
                    <i class="fas fa-calendar-check"></i>
                    Obrigações Fiscais
                    <span class="badge yellow">12</span>
                </div>
                <div class="nav-item" data-page="documentos" onclick="navigateTo('documentos')">
                    <i class="fas fa-folder-open"></i>
                    Documentos
                    <span class="badge">5</span>
                </div>

                <div class="sidebar-section-title" style="margin-top:12px">Financeiro</div>
                <div class="nav-item" data-page="financeiro" onclick="navigateTo('financeiro')">
                    <i class="fas fa-coins"></i>
                    Financeiro
                </div>

                <div class="sidebar-section-title" style="margin-top:12px">Portal</div>
                <div class="nav-item" data-page="portal" onclick="navigateTo('portal')">
                    <i class="fas fa-user-tie"></i>
                    Portal do Cliente
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="sidebar-user">
                    <div class="avatar">MC</div>
                    <div class="user-info">
                        <div class="name">Marcos Costa</div>
                        <div class="role">Contador Responsável</div>
                    </div>
                    <i class="fas fa-ellipsis-vertical" style="color:#64748B"></i>
                </div>
            </div>
        </aside>

        <!-- ============================================
             MAIN CONTENT
             ============================================ -->
        <main class="main-content">
            <!-- TOP HEADER -->
            <header class="top-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="page-title-header">
                        <h2 id="headerTitle">Dashboard</h2>
                        <p id="headerSubtitle">Visão geral do escritório</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-search">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Buscar clientes, obrigações..." id="globalSearch">
                    </div>
                    <button class="header-btn" title="Notificações" onclick="showToast('3 obrigações vencem esta semana','fas fa-bell')">
                        <i class="fas fa-bell"></i>
                        <div class="notif-dot"></div>
                    </button>
                    <button class="header-btn" title="Configurações">
                        <i class="fas fa-gear"></i>
                    </button>
                    <button class="header-btn" title="Ajuda">
                        <i class="fas fa-circle-question"></i>
                    </button>
                </div>
            </header>

            <div class="page-container">
                <!-- ============================================
                     PAGE 1: DASHBOARD
                     ============================================ -->
                <div class="page active" id="page-dashboard">
                    <!-- KPI CARDS -->
                    <div class="kpi-grid">
                        <div class="kpi-card hover-lift">
                            <div class="kpi-top">
                                <div class="kpi-icon blue"><i class="fas fa-building"></i></div>
                                <span class="kpi-trend up"><i class="fas fa-arrow-up"></i> 8%</span>
                            </div>
                            <div class="kpi-value">147</div>
                            <div class="kpi-label">Clientes Ativos</div>
                        </div>
                        <div class="kpi-card hover-lift">
                            <div class="kpi-top">
                                <div class="kpi-icon green"><i class="fas fa-calendar-check"></i></div>
                                <span class="kpi-trend up"><i class="fas fa-arrow-up"></i> 12%</span>
                            </div>
                            <div class="kpi-value">234</div>
                            <div class="kpi-label">Obrigações do Mês</div>
                        </div>
                        <div class="kpi-card hover-lift">
                            <div class="kpi-top">
                                <div class="kpi-icon yellow"><i class="fas fa-file-invoice-dollar"></i></div>
                                <span class="kpi-trend down"><i class="fas fa-arrow-down"></i> 3%</span>
                            </div>
                            <div class="kpi-value">38</div>
                            <div class="kpi-label">Guias Pendentes</div>
                        </div>
                        <div class="kpi-card hover-lift">
                            <div class="kpi-top">
                                <div class="kpi-icon red"><i class="fas fa-file-arrow-up"></i></div>
                                <span class="kpi-trend up"><i class="fas fa-arrow-up"></i> 15%</span>
                            </div>
                            <div class="kpi-value">1.842</div>
                            <div class="kpi-label">Docs Recebidos</div>
                        </div>
                    </div>

                    <!-- CHARTS ROW -->
                    <div class="charts-grid mb-24">
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-chart-area" style="color:var(--primary-light);margin-right:8px"></i>Receita de Honorários</h3>
                                <span class="card-action">Ver relatório</span>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="chartHonorarios"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-chart-pie" style="color:var(--green);margin-right:8px"></i>Status Obrigações</h3>
                                <span class="card-action">Detalhes</span>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="chartObrigacoes"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- BOTTOM ROW: PROGRESS + ACTIVITY -->
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-list-check" style="color:var(--yellow);margin-right:8px"></i>Progresso Obrigações — Fev/2026</h3>
                            </div>
                            <div class="obligations-progress">
                                <div class="obligation-item">
                                    <div class="obl-header">
                                        <span class="obl-name"><i class="fas fa-file-lines" style="margin-right:6px;color:var(--primary-light)"></i>DCTF</span>
                                        <span class="obl-status">89/147 entregues</span>
                                    </div>
                                    <div class="progress-bar"><div class="progress-fill green" style="width:60%"></div></div>
                                </div>
                                <div class="obligation-item">
                                    <div class="obl-header">
                                        <span class="obl-name"><i class="fas fa-database" style="margin-right:6px;color:var(--green)"></i>SPED Fiscal</span>
                                        <span class="obl-status">102/147 entregues</span>
                                    </div>
                                    <div class="progress-bar"><div class="progress-fill green" style="width:69%"></div></div>
                                </div>
                                <div class="obligation-item">
                                    <div class="obl-header">
                                        <span class="obl-name"><i class="fas fa-users" style="margin-right:6px;color:var(--yellow)"></i>eSocial</span>
                                        <span class="obl-status">78/147 entregues</span>
                                    </div>
                                    <div class="progress-bar"><div class="progress-fill yellow" style="width:53%"></div></div>
                                </div>
                                <div class="obligation-item">
                                    <div class="obl-header">
                                        <span class="obl-name"><i class="fas fa-receipt" style="margin-right:6px;color:var(--primary)"></i>EFD Contribuições</span>
                                        <span class="obl-status">65/147 entregues</span>
                                    </div>
                                    <div class="progress-bar"><div class="progress-fill blue" style="width:44%"></div></div>
                                </div>
                                <div class="obligation-item">
                                    <div class="obl-header">
                                        <span class="obl-name"><i class="fas fa-file-invoice" style="margin-right:6px;color:var(--red)"></i>DIRF</span>
                                        <span class="obl-status">12/147 entregues</span>
                                    </div>
                                    <div class="progress-bar"><div class="progress-fill red" style="width:8%"></div></div>
                                </div>
                                <div class="obligation-item">
                                    <div class="obl-header">
                                        <span class="obl-name"><i class="fas fa-file-code" style="margin-right:6px;color:#7C3AED"></i>SPED Contábil (ECD)</span>
                                        <span class="obl-status">45/147 entregues</span>
                                    </div>
                                    <div class="progress-bar"><div class="progress-fill blue" style="width:31%"></div></div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-clock-rotate-left" style="color:var(--primary);margin-right:8px"></i>Atividade Recente</h3>
                                <span class="card-action">Ver tudo</span>
                            </div>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-dot green"></div>
                                    <div>
                                        <div class="activity-text"><strong>DCTF</strong> de <strong>Padaria Pão Quente Ltda</strong> entregue com sucesso</div>
                                        <div class="activity-time">Hoje, 09:14</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot blue"></div>
                                    <div>
                                        <div class="activity-text"><strong>32 NF-e XML</strong> importadas de <strong>Auto Peças Farol Ltda</strong></div>
                                        <div class="activity-time">Hoje, 08:45</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot yellow"></div>
                                    <div>
                                        <div class="activity-text"><strong>eSocial S-1200</strong> pendente para <strong>TechNova Soluções S.A.</strong></div>
                                        <div class="activity-time">Hoje, 08:30</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot red"></div>
                                    <div>
                                        <div class="activity-text"><strong>SPED Fiscal</strong> atrasado — <strong>Mercado Central São Paulo</strong></div>
                                        <div class="activity-time">Ontem, 17:22</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot green"></div>
                                    <div>
                                        <div class="activity-text">Fatura <strong>R$ 2.800,00</strong> recebida de <strong>Construtora Horizonte</strong></div>
                                        <div class="activity-time">Ontem, 16:50</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot blue"></div>
                                    <div>
                                        <div class="activity-text">Novo cliente cadastrado: <strong>Clínica Saúde Total ME</strong></div>
                                        <div class="activity-time">Ontem, 14:10</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot green"></div>
                                    <div>
                                        <div class="activity-text"><strong>EFD Contribuições</strong> de <strong>Restaurante Sabor & Arte</strong> entregue</div>
                                        <div class="activity-time">Ontem, 11:35</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-dot yellow"></div>
                                    <div>
                                        <div class="activity-text">Guia <strong>DAS</strong> gerada para <strong>15 empresas</strong> do Simples Nacional</div>
                                        <div class="activity-time">20/02, 09:00</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================
                     PAGE 2: CLIENTES
                     ============================================ -->
                <div class="page" id="page-clientes">
                    <div class="action-bar">
                        <div>
                            <h2 class="section-title">Carteira de Clientes</h2>
                            <p class="section-subtitle">Gerencie seus clientes e honorários</p>
                        </div>
                        <button class="btn btn-primary" onclick="showToast('Formulário de novo cliente aberto','fas fa-plus')">
                            <i class="fas fa-plus"></i> Novo Cliente
                        </button>
                    </div>

                    <div class="stats-row">
                        <div class="stat-pill"><i class="fas fa-building" style="color:var(--primary)"></i> Total: <strong>147</strong></div>
                        <div class="stat-pill"><i class="fas fa-circle" style="color:var(--green);font-size:8px"></i> Ativos: <strong>139</strong></div>
                        <div class="stat-pill"><i class="fas fa-circle" style="color:var(--yellow);font-size:8px"></i> Pendentes: <strong>5</strong></div>
                        <div class="stat-pill"><i class="fas fa-circle" style="color:var(--text-muted);font-size:8px"></i> Inativos: <strong>3</strong></div>
                    </div>

                    <div class="filters-bar">
                        <div class="filter-group">
                            <label>Regime:</label>
                            <select class="filter-select" id="filterRegime" onchange="filterClientes()">
                                <option value="">Todos</option>
                                <option value="simples">Simples Nacional</option>
                                <option value="presumido">Lucro Presumido</option>
                                <option value="real">Lucro Real</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Status:</label>
                            <select class="filter-select" id="filterStatus" onchange="filterClientes()">
                                <option value="">Todos</option>
                                <option value="ativo">Ativo</option>
                                <option value="pendente">Pendente</option>
                                <option value="inativo">Inativo</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <input class="filter-input" type="text" placeholder="Buscar por razão social..." id="filterClienteSearch" oninput="filterClientes()" style="width:220px">
                        </div>
                    </div>

                    <div class="card" style="padding:0;overflow:hidden">
                        <div class="table-container">
                            <table id="clientesTable">
                                <thead>
                                    <tr>
                                        <th>Razão Social</th>
                                        <th>CNPJ</th>
                                        <th>Regime</th>
                                        <th>Status</th>
                                        <th>Honorários</th>
                                        <th>Contato</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="clientesTbody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ============================================
                     PAGE 3: OBRIGAÇÕES FISCAIS
                     ============================================ -->
                <div class="page" id="page-obrigacoes">
                    <div class="action-bar">
                        <div>
                            <h2 class="section-title">Obrigações Fiscais</h2>
                            <p class="section-subtitle">Calendário e acompanhamento de entregas</p>
                        </div>
                        <button class="btn btn-primary" onclick="showToast('Nova obrigação registrada','fas fa-plus')">
                            <i class="fas fa-plus"></i> Nova Obrigação
                        </button>
                    </div>

                    <div class="stats-row">
                        <div class="stat-pill"><i class="fas fa-check-circle" style="color:var(--green)"></i> Entregues: <strong>186</strong></div>
                        <div class="stat-pill"><i class="fas fa-clock" style="color:var(--yellow)"></i> Pendentes: <strong>36</strong></div>
                        <div class="stat-pill"><i class="fas fa-exclamation-triangle" style="color:var(--red)"></i> Atrasadas: <strong>12</strong></div>
                    </div>

                    <div class="filters-bar">
                        <div class="filter-chips" id="oblFilterChips">
                            <div class="filter-chip active" data-filter="todos" onclick="filterObl(this)">Todos</div>
                            <div class="filter-chip" data-filter="sped" onclick="filterObl(this)">SPED</div>
                            <div class="filter-chip" data-filter="dctf" onclick="filterObl(this)">DCTF</div>
                            <div class="filter-chip" data-filter="esocial" onclick="filterObl(this)">eSocial</div>
                            <div class="filter-chip" data-filter="efd" onclick="filterObl(this)">EFD</div>
                            <div class="filter-chip" data-filter="dirf" onclick="filterObl(this)">DIRF</div>
                        </div>
                    </div>

                    <div class="card mb-24">
                        <div class="calendar-header">
                            <div class="calendar-nav">
                                <button onclick="changeMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                                <span class="month-year" id="calendarMonthYear">Fevereiro 2026</span>
                                <button onclick="changeMonth(1)"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <div>
                                <button class="btn btn-outline btn-sm" onclick="showToast('Exportando calendário...','fas fa-download')">
                                    <i class="fas fa-download"></i> Exportar
                                </button>
                            </div>
                        </div>

                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Populated by JS -->
                        </div>

                        <div class="calendar-legend">
                            <div class="legend-item"><div class="legend-dot green"></div> Entregue</div>
                            <div class="legend-item"><div class="legend-dot yellow"></div> Pendente</div>
                            <div class="legend-item"><div class="legend-dot red"></div> Atrasado</div>
                        </div>
                    </div>

                    <!-- Obligations detailed table -->
                    <div class="card" style="padding:0;overflow:hidden">
                        <div class="card-header" style="padding:20px 24px">
                            <h3>Detalhamento de Obrigações</h3>
                            <span class="card-action">Exportar CSV</span>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Obrigação</th>
                                        <th>Cliente</th>
                                        <th>Competência</th>
                                        <th>Vencimento</th>
                                        <th>Status</th>
                                        <th>Responsável</th>
                                    </tr>
                                </thead>
                                <tbody id="oblTableBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ============================================
                     PAGE 4: DOCUMENTOS
                     ============================================ -->
                <div class="page" id="page-documentos">
                    <div class="action-bar">
                        <div>
                            <h2 class="section-title">Gestão de Documentos</h2>
                            <p class="section-subtitle">Receba, organize e acompanhe documentos fiscais</p>
                        </div>
                        <button class="btn btn-primary" onclick="showToast('Upload iniciado','fas fa-cloud-arrow-up')">
                            <i class="fas fa-cloud-arrow-up"></i> Upload
                        </button>
                    </div>

                    <!-- DROP ZONE -->
                    <div class="drop-zone" id="dropZone"
                         ondragover="event.preventDefault(); this.classList.add('drag-over')"
                         ondragleave="this.classList.remove('drag-over')"
                         ondrop="event.preventDefault(); this.classList.remove('drag-over'); showToast('Documentos recebidos com sucesso!','fas fa-check-circle')">
                        <i class="fas fa-cloud-arrow-up"></i>
                        <h4>Arraste e solte arquivos aqui</h4>
                        <p>ou clique para selecionar · XML, PDF, XLS, JPG até 25MB</p>
                    </div>

                    <!-- CATEGORY CARDS -->
                    <div class="docs-grid mb-24">
                        <div class="doc-category-card hover-lift"
                             ondragover="event.preventDefault(); this.classList.add('drag-over')"
                             ondragleave="this.classList.remove('drag-over')"
                             ondrop="event.preventDefault(); this.classList.remove('drag-over'); showToast('NF-e XML adicionada','fas fa-file-code')">
                            <div class="doc-category-icon xml"><i class="fas fa-file-code"></i></div>
                            <h4>NF-e XML</h4>
                            <p>Notas fiscais eletrônicas</p>
                            <div class="doc-count">847</div>
                            <div style="margin-top:8px">
                                <span class="status-badge active" style="font-size:10px"><i class="fas fa-circle"></i> 812 processadas</span>
                            </div>
                        </div>
                        <div class="doc-category-card hover-lift"
                             ondragover="event.preventDefault(); this.classList.add('drag-over')"
                             ondragleave="this.classList.remove('drag-over')"
                             ondrop="event.preventDefault(); this.classList.remove('drag-over'); showToast('Extrato adicionado','fas fa-file-lines')">
                            <div class="doc-category-icon bank"><i class="fas fa-building-columns"></i></div>
                            <h4>Extratos Bancários</h4>
                            <p>OFX, PDF de extratos</p>
                            <div class="doc-count">423</div>
                            <div style="margin-top:8px">
                                <span class="status-badge active" style="font-size:10px"><i class="fas fa-circle"></i> Conciliados</span>
                            </div>
                        </div>
                        <div class="doc-category-card hover-lift"
                             ondragover="event.preventDefault(); this.classList.add('drag-over')"
                             ondragleave="this.classList.remove('drag-over')"
                             ondrop="event.preventDefault(); this.classList.remove('drag-over'); showToast('Comprovante adicionado','fas fa-receipt')">
                            <div class="doc-category-icon receipt"><i class="fas fa-receipt"></i></div>
                            <h4>Comprovantes</h4>
                            <p>Pagamentos e recibos</p>
                            <div class="doc-count">356</div>
                            <div style="margin-top:8px">
                                <span class="status-badge pending" style="font-size:10px"><i class="fas fa-circle"></i> 18 pendentes</span>
                            </div>
                        </div>
                        <div class="doc-category-card hover-lift"
                             ondragover="event.preventDefault(); this.classList.add('drag-over')"
                             ondragleave="this.classList.remove('drag-over')"
                             ondrop="event.preventDefault(); this.classList.remove('drag-over'); showToast('Guia adicionada','fas fa-file-invoice-dollar')">
                            <div class="doc-category-icon guide"><i class="fas fa-file-invoice-dollar"></i></div>
                            <h4>Guias</h4>
                            <p>DAS, DARF, GPS, FGTS</p>
                            <div class="doc-count">216</div>
                            <div style="margin-top:8px">
                                <span class="status-badge overdue" style="font-size:10px"><i class="fas fa-circle"></i> 5 vencidas</span>
                            </div>
                        </div>
                    </div>

                    <!-- RECENT DOCS TABLE -->
                    <div class="card" style="padding:0;overflow:hidden">
                        <div class="card-header" style="padding:20px 24px">
                            <h3>Documentos Recentes</h3>
                            <span class="card-action">Ver todos</span>
                        </div>
                        <div id="docsListContainer">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- ============================================
                     PAGE 5: FINANCEIRO
                     ============================================ -->
                <div class="page" id="page-financeiro">
                    <div class="action-bar">
                        <div>
                            <h2 class="section-title">Financeiro</h2>
                            <p class="section-subtitle">Faturamento, honorários e faturas</p>
                        </div>
                        <div style="display:flex;gap:8px">
                            <button class="btn btn-outline" onclick="showToast('Relatório gerado','fas fa-file-pdf')">
                                <i class="fas fa-file-pdf"></i> Relatório
                            </button>
                            <button class="btn btn-primary" onclick="showToast('Nova fatura criada','fas fa-plus')">
                                <i class="fas fa-plus"></i> Nova Fatura
                            </button>
                        </div>
                    </div>

                    <div class="finance-summary mb-24">
                        <div class="finance-card">
                            <div class="fc-label"><i class="fas fa-arrow-trend-up" style="color:var(--green);margin-right:6px"></i>Receita Mensal</div>
                            <div class="fc-value green">R$ 187.450,00</div>
                            <div class="fc-sub">+12% em relação a jan/2026</div>
                        </div>
                        <div class="finance-card">
                            <div class="fc-label"><i class="fas fa-clock" style="color:var(--yellow);margin-right:6px"></i>A Receber</div>
                            <div class="fc-value">R$ 42.300,00</div>
                            <div class="fc-sub">18 faturas em aberto</div>
                        </div>
                        <div class="finance-card">
                            <div class="fc-label"><i class="fas fa-exclamation-circle" style="color:var(--red);margin-right:6px"></i>Inadimplência</div>
                            <div class="fc-value red">R$ 8.750,00</div>
                            <div class="fc-sub">5 faturas vencidas</div>
                        </div>
                    </div>

                    <div class="charts-grid mb-24">
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-chart-bar" style="color:var(--primary-light);margin-right:8px"></i>Faturamento — Últimos 6 Meses</h3>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="chartFaturamento"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-chart-pie" style="color:var(--green);margin-right:8px"></i>Receita por Regime</h3>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="chartRegime"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Receita por cliente -->
                    <div class="card mb-24">
                        <div class="card-header">
                            <h3>Top 10 — Receita por Cliente</h3>
                            <span class="card-action">Ver todos</span>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Cliente</th>
                                        <th>Regime</th>
                                        <th>Honorário Mensal</th>
                                        <th>Receita Anual</th>
                                        <th>% do Total</th>
                                    </tr>
                                </thead>
                                <tbody id="revenueTableBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Faturas -->
                    <div class="card" style="padding:0;overflow:hidden">
                        <div class="card-header" style="padding:20px 24px">
                            <h3>Faturas Recentes</h3>
                            <div class="filter-chips">
                                <div class="filter-chip active" onclick="this.parentElement.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active'));this.classList.add('active')">Todas</div>
                                <div class="filter-chip" onclick="this.parentElement.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active'));this.classList.add('active')">Pagas</div>
                                <div class="filter-chip" onclick="this.parentElement.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active'));this.classList.add('active')">Em Aberto</div>
                                <div class="filter-chip" onclick="this.parentElement.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active'));this.classList.add('active')">Vencidas</div>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nº Fatura</th>
                                        <th>Cliente</th>
                                        <th>Valor</th>
                                        <th>Emissão</th>
                                        <th>Vencimento</th>
                                        <th>Status</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="faturasTableBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ============================================
                     PAGE 6: PORTAL DO CLIENTE
                     ============================================ -->
                <div class="page" id="page-portal">
                    <div class="action-bar">
                        <div>
                            <h2 class="section-title">Portal do Cliente</h2>
                            <p class="section-subtitle">Preview — como o cliente visualiza o portal</p>
                        </div>
                        <div style="display:flex;gap:8px;align-items:center">
                            <label style="font-size:12px;font-weight:600;color:var(--text-secondary)">Visualizando como:</label>
                            <select class="filter-select" id="portalClienteSelect" onchange="updatePortalView()">
                                <option>TechNova Soluções S.A.</option>
                                <option>Padaria Pão Quente Ltda</option>
                                <option>Auto Peças Farol Ltda</option>
                                <option>Construtora Horizonte Ltda</option>
                                <option>Clínica Saúde Total ME</option>
                            </select>
                        </div>
                    </div>

                    <div class="portal-preview">
                        <div class="portal-header-bar">
                            <div style="display:flex;align-items:center;gap:12px">
                                <div style="width:36px;height:36px;background:rgba(255,255,255,0.2);border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:14px">CF</div>
                                <div>
                                    <h3>ContaFlow — Portal do Cliente</h3>
                                    <span class="company-name" id="portalCompanyName">TechNova Soluções S.A.</span>
                                </div>
                            </div>
                            <div style="display:flex;gap:8px;align-items:center">
                                <span style="font-size:12px;opacity:0.8"><i class="fas fa-user-circle" style="margin-right:4px"></i>João Ricardo Silva</span>
                                <button style="background:rgba(255,255,255,0.2);border:none;color:white;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;font-family:inherit">Sair</button>
                            </div>
                        </div>

                        <div class="portal-body">
                            <div class="portal-grid">
                                <div>
                                    <!-- Docs Pendentes -->
                                    <div class="portal-section">
                                        <h4><i class="fas fa-file-circle-exclamation"></i> Documentos Pendentes de Envio</h4>
                                        <div style="display:flex;flex-direction:column;gap:8px">
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>Extrato bancário — Janeiro/2026</h5>
                                                    <p>Banco do Brasil · Conta 12.345-6</p>
                                                </div>
                                                <span class="status-badge pending"><i class="fas fa-circle"></i> Pendente</span>
                                            </div>
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>Comprovantes de pagamento — Janeiro/2026</h5>
                                                    <p>Fornecedores e despesas operacionais</p>
                                                </div>
                                                <span class="status-badge pending"><i class="fas fa-circle"></i> Pendente</span>
                                            </div>
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>Notas de serviço tomadas — Janeiro/2026</h5>
                                                    <p>Serviços contratados</p>
                                                </div>
                                                <span class="status-badge overdue"><i class="fas fa-circle"></i> Atrasado</span>
                                            </div>
                                        </div>
                                        <div style="margin-top:12px">
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-cloud-arrow-up"></i> Enviar Documentos</button>
                                        </div>
                                    </div>

                                    <!-- Status Obrigações -->
                                    <div class="portal-section">
                                        <h4><i class="fas fa-calendar-check"></i> Status das Obrigações — Fev/2026</h4>
                                        <div class="table-container">
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th>Obrigação</th>
                                                        <th>Competência</th>
                                                        <th>Prazo</th>
                                                        <th>Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><strong>SPED Fiscal</strong></td>
                                                        <td>Jan/2026</td>
                                                        <td>25/02/2026</td>
                                                        <td><span class="status-badge active"><i class="fas fa-circle"></i> Entregue</span></td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>EFD Contribuições</strong></td>
                                                        <td>Jan/2026</td>
                                                        <td>25/02/2026</td>
                                                        <td><span class="status-badge active"><i class="fas fa-circle"></i> Entregue</span></td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>DCTF</strong></td>
                                                        <td>Dez/2025</td>
                                                        <td>20/02/2026</td>
                                                        <td><span class="status-badge pending"><i class="fas fa-circle"></i> Em Processo</span></td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>eSocial S-1200</strong></td>
                                                        <td>Jan/2026</td>
                                                        <td>15/02/2026</td>
                                                        <td><span class="status-badge active"><i class="fas fa-circle"></i> Entregue</span></td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>DIRF</strong></td>
                                                        <td>2025</td>
                                                        <td>28/02/2026</td>
                                                        <td><span class="status-badge pending"><i class="fas fa-circle"></i> Pendente</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- Guias para pagamento -->
                                    <div class="portal-section">
                                        <h4><i class="fas fa-file-invoice-dollar"></i> Guias para Pagamento</h4>
                                        <div style="display:flex;flex-direction:column;gap:8px">
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>DARF — IRPJ</h5>
                                                    <p>Competência: Jan/2026 · Vence: 28/02/2026</p>
                                                </div>
                                                <div style="display:flex;align-items:center">
                                                    <span class="guia-value">R$ 4.230,00</span>
                                                    <button class="btn-download"><i class="fas fa-download"></i> PDF</button>
                                                </div>
                                            </div>
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>DARF — CSLL</h5>
                                                    <p>Competência: Jan/2026 · Vence: 28/02/2026</p>
                                                </div>
                                                <div style="display:flex;align-items:center">
                                                    <span class="guia-value">R$ 1.890,00</span>
                                                    <button class="btn-download"><i class="fas fa-download"></i> PDF</button>
                                                </div>
                                            </div>
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>DARF — PIS</h5>
                                                    <p>Competência: Jan/2026 · Vence: 25/02/2026</p>
                                                </div>
                                                <div style="display:flex;align-items:center">
                                                    <span class="guia-value">R$ 2.145,00</span>
                                                    <button class="btn-download"><i class="fas fa-download"></i> PDF</button>
                                                </div>
                                            </div>
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>DARF — COFINS</h5>
                                                    <p>Competência: Jan/2026 · Vence: 25/02/2026</p>
                                                </div>
                                                <div style="display:flex;align-items:center">
                                                    <span class="guia-value">R$ 9.870,00</span>
                                                    <button class="btn-download"><i class="fas fa-download"></i> PDF</button>
                                                </div>
                                            </div>
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>GPS — INSS</h5>
                                                    <p>Competência: Jan/2026 · Vence: 20/02/2026</p>
                                                </div>
                                                <div style="display:flex;align-items:center">
                                                    <span class="guia-value">R$ 12.340,00</span>
                                                    <button class="btn-download"><i class="fas fa-download"></i> PDF</button>
                                                </div>
                                            </div>
                                            <div class="guia-item">
                                                <div class="guia-info">
                                                    <h5>FGTS</h5>
                                                    <p>Competência: Jan/2026 · Vence: 07/02/2026</p>
                                                </div>
                                                <div style="display:flex;align-items:center">
                                                    <span class="guia-value">R$ 8.560,00</span>
                                                    <button class="btn-download"><i class="fas fa-download"></i> PDF</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <!-- Chat -->
                                    <div class="chat-window">
                                        <div class="chat-header">
                                            <div class="online-dot"></div>
                                            <span>Chat com o Escritório</span>
                                        </div>
                                        <div class="chat-messages" id="chatMessages">
                                            <div class="chat-msg received">
                                                <div>Bom dia! Precisamos do extrato bancário de janeiro para concluir o SPED.</div>
                                                <div class="msg-time">Ontem, 14:30</div>
                                            </div>
                                            <div class="chat-msg sent">
                                                <div>Olá! Vou solicitar ao banco e envio até amanhã.</div>
                                                <div class="msg-time">Ontem, 15:12</div>
                                            </div>
                                            <div class="chat-msg received">
                                                <div>Perfeito! Lembrando que o prazo da DCTF é dia 20/02. Precisamos entregar até sexta.</div>
                                                <div class="msg-time">Ontem, 15:15</div>
                                            </div>
                                            <div class="chat-msg sent">
                                                <div>Entendido, darei prioridade. Também já aproveitei e enviei os comprovantes de pagamento dos fornecedores.</div>
                                                <div class="msg-time">Ontem, 16:00</div>
                                            </div>
                                            <div class="chat-msg received">
                                                <div>Recebemos os comprovantes, obrigado! 👍 A DIRF será entregue até dia 28, estamos finalizando.</div>
                                                <div class="msg-time">Hoje, 08:45</div>
                                            </div>
                                            <div class="chat-msg sent">
                                                <div>Ótimo, qualquer pendência me avise por aqui mesmo.</div>
                                                <div class="msg-time">Hoje, 09:10</div>
                                            </div>
                                        </div>
                                        <div class="chat-input">
                                            <input type="text" placeholder="Digite sua mensagem..." id="chatInput" onkeydown="if(event.key==='Enter')sendChatMsg()">
                                            <button onclick="sendChatMsg()"><i class="fas fa-paper-plane"></i></button>
                                        </div>
                                    </div>

                                    <!-- Summary card -->
                                    <div class="portal-section" style="margin-top:16px">
                                        <h4><i class="fas fa-chart-simple"></i> Resumo da Empresa</h4>
                                        <div style="display:flex;flex-direction:column;gap:12px">
                                            <div style="display:flex;justify-content:space-between;font-size:13px">
                                                <span style="color:var(--text-secondary)">CNPJ</span>
                                                <span class="font-mono" style="font-weight:600">12.345.678/0001-90</span>
                                            </div>
                                            <div class="divider"></div>
                                            <div style="display:flex;justify-content:space-between;font-size:13px">
                                                <span style="color:var(--text-secondary)">Regime</span>
                                                <span class="regime-tag presumido">Presumido</span>
                                            </div>
                                            <div class="divider"></div>
                                            <div style="display:flex;justify-content:space-between;font-size:13px">
                                                <span style="color:var(--text-secondary)">Honorário</span>
                                                <span style="font-weight:700;color:var(--primary)">R$ 3.200,00</span>
                                            </div>
                                            <div class="divider"></div>
                                            <div style="display:flex;justify-content:space-between;font-size:13px">
                                                <span style="color:var(--text-secondary)">Funcionários</span>
                                                <span style="font-weight:600">42</span>
                                            </div>
                                            <div class="divider"></div>
                                            <div style="display:flex;justify-content:space-between;font-size:13px">
                                                <span style="color:var(--text-secondary)">CNAE Principal</span>
                                                <span style="font-weight:600">62.01-5</span>
                                            </div>
                                            <div class="divider"></div>
                                            <div style="display:flex;justify-content:space-between;font-size:13px">
                                                <span style="color:var(--text-secondary)">Contato</span>
                                                <span style="font-weight:600">joao@technova.com.br</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Next deadlines -->
                                    <div class="portal-section" style="margin-top:16px">
                                        <h4><i class="fas fa-bell"></i> Próximos Prazos</h4>
                                        <div style="display:flex;flex-direction:column;gap:8px">
                                            <div style="display:flex;align-items:center;gap:10px;padding:8px;background:var(--red-light);border-radius:6px">
                                                <i class="fas fa-exclamation-triangle" style="color:var(--red);font-size:12px"></i>
                                                <div style="flex:1;font-size:12px">
                                                    <div style="font-weight:600;color:var(--red)">DCTF — 20/02/2026</div>
                                                    <div style="color:var(--text-muted)">Faltam 0 dias</div>
                                                </div>
                                            </div>
                                            <div style="display:flex;align-items:center;gap:10px;padding:8px;background:var(--yellow-light);border-radius:6px">
                                                <i class="fas fa-clock" style="color:var(--yellow);font-size:12px"></i>
                                                <div style="flex:1;font-size:12px">
                                                    <div style="font-weight:600;color:var(--yellow)">DARF PIS/COFINS — 25/02/2026</div>
                                                    <div style="color:var(--text-muted)">Faltam 4 dias</div>
                                                </div>
                                            </div>
                                            <div style="display:flex;align-items:center;gap:10px;padding:8px;background:var(--yellow-light);border-radius:6px">
                                                <i class="fas fa-clock" style="color:var(--yellow);font-size:12px"></i>
                                                <div style="flex:1;font-size:12px">
                                                    <div style="font-weight:600;color:var(--yellow)">DIRF — 28/02/2026</div>
                                                    <div style="color:var(--text-muted)">Faltam 7 dias</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- TOAST -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMsg">Ação realizada</span>
    </div>

    <!-- MODAL -->
    <div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
        <div class="modal">
            <h3 id="modalTitle">Detalhes do Cliente</h3>
            <p id="modalBody">Conteúdo do modal</p>
            <div class="modal-actions">
                <button class="btn btn-outline" onclick="closeModal()">Fechar</button>
                <button class="btn btn-primary" onclick="closeModal()">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
    /* ============================================
       CONTAFLOW v3 — COMPLETE JAVASCRIPT
       ============================================ */

    // ============================================
    // DATA — CLIENTES
    // ============================================
    const clientes = [
        { razao: "TechNova Soluções S.A.", cnpj: "12.345.678/0001-90", regime: "presumido", status: "ativo", honorario: 3200, contato: "João Ricardo Silva", email: "joao@technova.com.br", funcionarios: 42, cnae: "62.01-5 — Desenvolvimento de Software" },
        { razao: "Padaria Pão Quente Ltda", cnpj: "23.456.789/0001-01", regime: "simples", status: "ativo", honorario: 890, contato: "Maria das Graças", email: "maria@paoquente.com.br", funcionarios: 12, cnae: "10.91-1 — Panificação" },
        { razao: "Auto Peças Farol Ltda", cnpj: "34.567.890/0001-12", regime: "presumido", status: "ativo", honorario: 1850, contato: "Carlos Eduardo", email: "carlos@autofarol.com.br", funcionarios: 28, cnae: "45.30-7 — Comércio de Peças" },
        { razao: "Construtora Horizonte Ltda", cnpj: "45.678.901/0001-23", regime: "real", status: "ativo", honorario: 5400, contato: "Ana Paula Mendes", email: "ana@horizonteconstru.com.br", funcionarios: 156, cnae: "41.20-4 — Construção Edifícios" },
        { razao: "Clínica Saúde Total ME", cnpj: "56.789.012/0001-34", regime: "presumido", status: "ativo", honorario: 2100, contato: "Dr. Fernando Alves", email: "fernando@saudetotal.com.br", funcionarios: 18, cnae: "86.30-5 — Atividade Médica" },
        { razao: "Mercado Central São Paulo Ltda", cnpj: "67.890.123/0001-45", regime: "real", status: "ativo", honorario: 4800, contato: "Roberto Tanaka", email: "roberto@mercadocentral.com.br", funcionarios: 89, cnae: "47.11-3 — Comércio Varejista" },
        { razao: "Restaurante Sabor & Arte Ltda", cnpj: "78.901.234/0001-56", regime: "simples", status: "ativo", honorario: 1100, contato: "Fernanda Costa", email: "fernanda@saborearte.com.br", funcionarios: 22, cnae: "56.11-2 — Restaurantes" },
        { razao: "TransLog Express S.A.", cnpj: "89.012.345/0001-67", regime: "real", status: "ativo", honorario: 6200, contato: "Marcelo Ferreira", email: "marcelo@translog.com.br", funcionarios: 210, cnae: "49.30-2 — Transporte Rodoviário de Carga" },
        { razao: "Escola Futuro Brilhante ME", cnpj: "90.123.456/0001-78", regime: "simples", status: "ativo", honorario: 750, contato: "Professora Lúcia", email: "lucia@futurobrilhante.com.br", funcionarios: 15, cnae: "85.12-1 — Educação Infantil" },
        { razao: "Indústria Metalúrgica Aço Forte Ltda", cnpj: "01.234.567/0001-89", regime: "real", status: "ativo", honorario: 7500, contato: "Eng. Ricardo Bastos", email: "ricardo@acoforte.com.br", funcionarios: 320, cnae: "24.31-8 — Metalurgia" },
        { razao: "Farmácia Popular Vida Ltda", cnpj: "11.222.333/0001-44", regime: "simples", status: "ativo", honorario: 950, contato: "Dra. Camila Reis", email: "camila@farmaciavida.com.br", funcionarios: 8, cnae: "47.71-7 — Comércio de Produtos Farmacêuticos" },
        { razao: "Studio de Design Criativa ME", cnpj: "22.333.444/0001-55", regime: "simples", status: "ativo", honorario: 680, contato: "Rafaela Monteiro", email: "rafa@studiocriativa.com.br", funcionarios: 5, cnae: "74.10-2 — Design" },
        { razao: "Distribuidora Alimentos do Sul Ltda", cnpj: "33.444.555/0001-66", regime: "presumido", status: "ativo", honorario: 2600, contato: "José Antônio Pereira", email: "jose@alimentosdosul.com.br", funcionarios: 45, cnae: "46.39-7 — Comércio Atacadista de Alimentos" },
        { razao: "Imobiliária Lar Doce Lar Ltda", cnpj: "44.555.666/0001-77", regime: "presumido", status: "pendente", honorario: 1400, contato: "Sandra Oliveira", email: "sandra@lardocelar.com.br", funcionarios: 10, cnae: "68.22-6 — Corretagem Imobiliária" },
        { razao: "Gráfica Expressa Ltda", cnpj: "55.666.777/0001-88", regime: "simples", status: "pendente", honorario: 820, contato: "Paulo Henrique", email: "paulo@graficaexpressa.com.br", funcionarios: 14, cnae: "18.11-3 — Impressão" },
        { razao: "Advocacia Martins & Associados", cnpj: "66.777.888/0001-99", regime: "presumido", status: "ativo", honorario: 2900, contato: "Dr. Gustavo Martins", email: "gustavo@martinsadv.com.br", funcionarios: 20, cnae: "69.11-7 — Atividades Jurídicas" },
        { razao: "Pet Shop Amigo Fiel ME", cnpj: "77.888.999/0001-00", regime: "simples", status: "ativo", honorario: 620, contato: "Juliana Carvalho", email: "juliana@amigofiel.com.br", funcionarios: 6, cnae: "47.89-0 — Comércio Varejista de Animais" },
        { razao: "Academia Corpo em Forma Ltda", cnpj: "88.999.000/0001-11", regime: "simples", status: "pendente", honorario: 780, contato: "Prof. Diego Santos", email: "diego@corpoemforma.com.br", funcionarios: 11, cnae: "93.13-1 — Atividades de Condicionamento Físico" },
        { razao: "Consultoria Magna Ltda", cnpj: "99.000.111/0001-22", regime: "presumido", status: "ativo", honorario: 3800, contato: "Adriana Campos", email: "adriana@magnacons.com.br", funcionarios: 35, cnae: "70.20-4 — Consultoria em Gestão" },
        { razao: "Hotel Bela Vista Ltda", cnpj: "10.111.222/0001-33", regime: "real", status: "ativo", honorario: 4500, contato: "Sr. Antônio Vieira", email: "antonio@belavista.com.br", funcionarios: 72, cnae: "55.10-8 — Hotéis" },
        { razao: "Elétrica Silva & Filhos Ltda", cnpj: "20.222.333/0001-44", regime: "simples", status: "inativo", honorario: 0, contato: "José Silva", email: "jose@eletricasilva.com.br", funcionarios: 3, cnae: "43.21-5 — Instalações Elétricas" },
        { razao: "Contabilidade Precisão Ltda", cnpj: "30.333.444/0001-55", regime: "simples", status: "inativo", honorario: 0, contato: "Sra. Beatriz Lima", email: "beatriz@contprecisao.com.br", funcionarios: 4, cnae: "69.20-6 — Atividades de Contabilidade" },
        { razao: "Agência de Viagens Mundo Afora", cnpj: "40.444.555/0001-66", regime: "simples", status: "pendente", honorario: 700, contato: "Cláudia Ferreira", email: "claudia@mundoafora.com.br", funcionarios: 7, cnae: "79.11-2 — Agências de Viagens" },
        { razao: "Laboratório Análises Clínicas Vida", cnpj: "50.555.666/0001-77", regime: "presumido", status: "ativo", honorario: 2400, contato: "Dr. Marcos Lima", email: "marcos@labvida.com.br", funcionarios: 30, cnae: "86.40-2 — Serviços Diagnósticos" },
        { razao: "Frigorífico Boi Gordo S.A.", cnpj: "60.666.777/0001-88", regime: "real", status: "inativo", honorario: 0, contato: "Roberto Mendes", email: "roberto@boigordo.com.br", funcionarios: 0, cnae: "10.11-2 — Abate de Reses" },
    ];

    // ============================================
    // DATA — OBRIGAÇÕES FISCAIS
    // ============================================
    const obrigacoes = [
        { tipo: "dctf", nome: "DCTF", cliente: "TechNova Soluções S.A.", competencia: "Dez/2025", vencimento: "20/02/2026", status: "pendente", responsavel: "Ana Beatriz" },
        { tipo: "sped", nome: "SPED Fiscal", cliente: "TechNova Soluções S.A.", competencia: "Jan/2026", vencimento: "25/02/2026", status: "entregue", responsavel: "Carlos Lima" },
        { tipo: "esocial", nome: "eSocial S-1200", cliente: "TechNova Soluções S.A.", competencia: "Jan/2026", vencimento: "15/02/2026", status: "entregue", responsavel: "Márcia Souza" },
        { tipo: "efd", nome: "EFD Contribuições", cliente: "TechNova Soluções S.A.", competencia: "Jan/2026", vencimento: "25/02/2026", status: "entregue", responsavel: "Carlos Lima" },
        { tipo: "dirf", nome: "DIRF", cliente: "TechNova Soluções S.A.", competencia: "2025", vencimento: "28/02/2026", status: "pendente", responsavel: "Marcos Costa" },
        { tipo: "sped", nome: "SPED Fiscal", cliente: "Mercado Central São Paulo", competencia: "Jan/2026", vencimento: "25/02/2026", status: "atrasado", responsavel: "Carlos Lima" },
        { tipo: "dctf", nome: "DCTF", cliente: "Padaria Pão Quente Ltda", competencia: "Dez/2025", vencimento: "20/02/2026", status: "entregue", responsavel: "Ana Beatriz" },
        { tipo: "esocial", nome: "eSocial S-1200", cliente: "Construtora Horizonte Ltda", competencia: "Jan/2026", vencimento: "15/02/2026", status: "entregue", responsavel: "Márcia Souza" },
        { tipo: "sped", nome: "SPED Contábil (ECD)", cliente: "TransLog Express S.A.", competencia: "2025", vencimento: "28/02/2026", status: "pendente", responsavel: "Carlos Lima" },
        { tipo: "efd", nome: "EFD Contribuições", cliente: "Restaurante Sabor & Arte", competencia: "Jan/2026", vencimento: "25/02/2026", status: "entregue", responsavel: "Marcos Costa" },
        { tipo: "dctf", nome: "DCTF", cliente: "Auto Peças Farol Ltda", competencia: "Dez/2025", vencimento: "20/02/2026", status: "atrasado", responsavel: "Ana Beatriz" },
        { tipo: "esocial", nome: "eSocial S-1210", cliente: "Indústria Metalúrgica Aço Forte", competencia: "Jan/2026", vencimento: "15/02/2026", status: "entregue", responsavel: "Márcia Souza" },
        { tipo: "dirf", nome: "DIRF", cliente: "Construtora Horizonte Ltda", competencia: "2025", vencimento: "28/02/2026", status: "pendente", responsavel: "Marcos Costa" },
        { tipo: "sped", nome: "SPED Fiscal", cliente: "Distribuidora Alimentos do Sul", competencia: "Jan/2026", vencimento: "25/02/2026", status: "entregue", responsavel: "Carlos Lima" },
        { tipo: "efd", nome: "EFD Contribuições", cliente: "Hotel Bela Vista Ltda", competencia: "Jan/2026", vencimento: "25/02/2026", status: "pendente", responsavel: "Carlos Lima" },
        { tipo: "esocial", nome: "eSocial S-2299", cliente: "Advocacia Martins & Associados", competencia: "Jan/2026", vencimento: "15/02/2026", status: "entregue", responsavel: "Márcia Souza" },
        { tipo: "dctf", nome: "DCTF", cliente: "Clínica Saúde Total ME", competencia: "Dez/2025", vencimento: "20/02/2026", status: "entregue", responsavel: "Ana Beatriz" },
        { tipo: "sped", nome: "SPED Fiscal", cliente: "Consultoria Magna Ltda", competencia: "Jan/2026", vencimento: "25/02/2026", status: "entregue", responsavel: "Carlos Lima" },
        { tipo: "dirf", nome: "DIRF", cliente: "Indústria Metalúrgica Aço Forte", competencia: "2025", vencimento: "28/02/2026", status: "pendente", responsavel: "Marcos Costa" },
        { tipo: "esocial", nome: "eSocial S-1200", cliente: "Mercado Central São Paulo", competencia: "Jan/2026", vencimento: "15/02/2026", status: "atrasado", responsavel: "Márcia Souza" },
    ];

    // DATA — DOCUMENTOS
    // ============================================
    const documentos = [
        { nome: "NFe_00234_TechNova.xml", tipo: "xml", categoria: "NF-e XML", tamanho: "45 KB", data: "21/02/2026", status: "processado", cliente: "TechNova Soluções S.A." },
        { nome: "NFe_00235_TechNova.xml", tipo: "xml", categoria: "NF-e XML", tamanho: "38 KB", data: "21/02/2026", status: "processado", cliente: "TechNova Soluções S.A." },
        { nome: "Extrato_BB_Jan2026.pdf", tipo: "pdf", categoria: "Extratos", tamanho: "1.2 MB", data: "20/02/2026", status: "processado", cliente: "Auto Peças Farol Ltda" },
        { nome: "Comprovante_Aluguel_Jan.pdf", tipo: "pdf", categoria: "Comprovantes", tamanho: "320 KB", data: "20/02/2026", status: "pendente", cliente: "Padaria Pão Quente Ltda" },
        { nome: "DARF_IRPJ_Jan2026.pdf", tipo: "pdf", categoria: "Guias", tamanho: "85 KB", data: "19/02/2026", status: "processado", cliente: "TechNova Soluções S.A." },
        { nome: "NFe_Lote_42unid.zip", tipo: "xml", categoria: "NF-e XML", tamanho: "2.8 MB", data: "19/02/2026", status: "processando", cliente: "Mercado Central São Paulo" },
        { nome: "Extrato_Itau_Jan2026.ofx", tipo: "xls", categoria: "Extratos", tamanho: "156 KB", data: "18/02/2026", status: "processado", cliente: "Construtora Horizonte Ltda" },
        { nome: "Recibo_Fornecedor_ABC.jpg", tipo: "img", categoria: "Comprovantes", tamanho: "890 KB", data: "18/02/2026", status: "pendente", cliente: "Restaurante Sabor & Arte" },
        { nome: "GPS_INSS_Jan2026.pdf", tipo: "pdf", categoria: "Guias", tamanho: "92 KB", data: "17/02/2026", status: "processado", cliente: "TransLog Express S.A." },
        { nome: "NFe_00180_AutoFarol.xml", tipo: "xml", categoria: "NF-e XML", tamanho: "52 KB", data: "17/02/2026", status: "processado", cliente: "Auto Peças Farol Ltda" },
        { nome: "Planilha_Folha_Jan.xlsx", tipo: "xls", categoria: "Comprovantes", tamanho: "340 KB", data: "16/02/2026", status: "processado", cliente: "Indústria Metalúrgica Aço Forte" },
        { nome: "DAS_Jan2026_PaoQuente.pdf", tipo: "pdf", categoria: "Guias", tamanho: "67 KB", data: "16/02/2026", status: "processado", cliente: "Padaria Pão Quente Ltda" },
    ];

    const faturas = [
        { numero: "FAT-2026-0147", cliente: "TechNova Soluções S.A.", valor: 3200, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0148", cliente: "Construtora Horizonte Ltda", valor: 5400, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0149", cliente: "Indústria Metalúrgica Aço Forte", valor: 7500, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0150", cliente: "TransLog Express S.A.", valor: 6200, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0151", cliente: "Mercado Central São Paulo", valor: 4800, emissao: "01/02/2026", vencimento: "10/02/2026", status: "aberto" },
        { numero: "FAT-2026-0152", cliente: "Consultoria Magna Ltda", valor: 3800, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0153", cliente: "Hotel Bela Vista Ltda", valor: 4500, emissao: "01/02/2026", vencimento: "10/02/2026", status: "aberto" },
        { numero: "FAT-2026-0154", cliente: "Auto Peças Farol Ltda", valor: 1850, emissao: "01/02/2026", vencimento: "10/02/2026", status: "vencido" },
        { numero: "FAT-2026-0155", cliente: "Advocacia Martins & Associados", valor: 2900, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0156", cliente: "Clínica Saúde Total ME", valor: 2100, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0157", cliente: "Laboratório Análises Clínicas Vida", valor: 2400, emissao: "01/02/2026", vencimento: "10/02/2026", status: "aberto" },
        { numero: "FAT-2026-0158", cliente: "Distribuidora Alimentos do Sul", valor: 2600, emissao: "01/02/2026", vencimento: "10/02/2026", status: "vencido" },
        { numero: "FAT-2026-0159", cliente: "Padaria Pão Quente Ltda", valor: 890, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0160", cliente: "Restaurante Sabor & Arte", valor: 1100, emissao: "01/02/2026", vencimento: "10/02/2026", status: "pago" },
        { numero: "FAT-2026-0161", cliente: "Imobiliária Lar Doce Lar", valor: 1400, emissao: "01/02/2026", vencimento: "10/02/2026", status: "vencido" },
    ];

    // NAVIGATION
    const pageTitles = {
        dashboard: { title: 'Dashboard', sub: 'Visão geral do escritório' },
        clientes: { title: 'Clientes', sub: 'Gestão da carteira de clientes' },
        obrigacoes: { title: 'Obrigações Fiscais', sub: 'Calendário e acompanhamento' },
        documentos: { title: 'Documentos', sub: 'Gestão documental' },
        financeiro: { title: 'Financeiro', sub: 'Faturamento e honorários' },
        portal: { title: 'Portal do Cliente', sub: 'Preview do portal' },
    };

    function navigateTo(page) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page-' + page).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.querySelector(`.nav-item[data-page="${page}"]`).classList.add('active');
        const info = pageTitles[page];
        document.getElementById('headerTitle').textContent = info.title;
        document.getElementById('headerSubtitle').textContent = info.sub;
        document.getElementById('sidebar').classList.remove('open');
        if (page === 'dashboard') initDashboardCharts();
        if (page === 'financeiro') initFinanceCharts();
    }

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('open');
    }

    // TOAST
    let toastTimeout;
    function showToast(msg, icon = 'fas fa-check-circle') {
        const toast = document.getElementById('toast');
        document.getElementById('toastMsg').textContent = msg;
        toast.querySelector('i').className = icon;
        toast.classList.add('show');
        clearTimeout(toastTimeout);
        toastTimeout = setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // MODAL
    function showModal(title, body) {
        document.getElementById('modalTitle').textContent = title;
        document.getElementById('modalBody').textContent = body;
        document.getElementById('modalOverlay').classList.add('show');
    }
    function closeModal() {
        document.getElementById('modalOverlay').classList.remove('show');
    }

    // RENDER CLIENTES
    function renderClientes(data) {
        const tbody = document.getElementById('clientesTbody');
        tbody.innerHTML = '';
        data.forEach((c, i) => {
            const statusClass = c.status === 'ativo' ? 'active' : c.status === 'pendente' ? 'pending' : 'inactive';
            const statusLabel = c.status.charAt(0).toUpperCase() + c.status.slice(1);
            const regimeLabel = c.regime === 'simples' ? 'Simples' : c.regime === 'presumido' ? 'Presumido' : 'Real';
            const tr = document.createElement('tr');
            tr.className = 'client-row';
            tr.onclick = () => toggleClientExpand(i);
            tr.innerHTML = `
                <td><strong>${c.razao}</strong></td>
                <td><span class="cnpj-text">${c.cnpj}</span></td>
                <td><span class="regime-tag ${c.regime}">${regimeLabel}</span></td>
                <td><span class="status-badge ${statusClass}"><i class="fas fa-circle"></i> ${statusLabel}</span></td>
                <td><span class="honorario-value">${c.honorario > 0 ? 'R$ ' + c.honorario.toLocaleString('pt-BR', {minimumFractionDigits:2}) : '—'}</span></td>
                <td style="font-size:12px;color:var(--text-secondary)">${c.contato}</td>
                <td><i class="fas fa-chevron-down" style="color:var(--text-muted);font-size:12px;transition:transform 0.2s" id="chevron-${i}"></i></td>
            `;
            tbody.appendChild(tr);
            const expandTr = document.createElement('tr');
            expandTr.className = 'client-expand';
            expandTr.id = `expand-${i}`;
            expandTr.innerHTML = `
                <td colspan="7">
                    <div class="client-detail-grid">
                        <div class="client-detail-item"><div class="detail-label">E-mail</div><div class="detail-value">${c.email}</div></div>
                        <div class="client-detail-item"><div class="detail-label">Funcionários</div><div class="detail-value">${c.funcionarios}</div></div>
                        <div class="client-detail-item"><div class="detail-label">CNAE</div><div class="detail-value" style="font-size:12px">${c.cnae}</div></div>
                        <div class="client-detail-item"><div class="detail-label">Honorário Anual</div><div class="detail-value" style="color:var(--green)">R$ ${(c.honorario * 12).toLocaleString('pt-BR', {minimumFractionDigits:2})}</div></div>
                        <div class="client-detail-item"><div class="detail-label">Obrigações Pendentes</div><div class="detail-value" style="color:var(--yellow)">${Math.floor(Math.random()*5)}</div></div>
                        <div class="client-detail-item"><div class="detail-label">Docs Recebidos (mês)</div><div class="detail-value">${Math.floor(Math.random()*30)+5}</div></div>
                    </div>
                </td>
            `;
            tbody.appendChild(expandTr);
        });
    }

    function toggleClientExpand(i) {
        const el = document.getElementById(`expand-${i}`);
        const chevron = document.getElementById(`chevron-${i}`);
        el.classList.toggle('show');
        chevron.style.transform = el.classList.contains('show') ? 'rotate(180deg)' : '';
    }

    function filterClientes() {
        const regime = document.getElementById('filterRegime').value;
        const status = document.getElementById('filterStatus').value;
        const search = document.getElementById('filterClienteSearch').value.toLowerCase();
        const filtered = clientes.filter(c => {
            if (regime && c.regime !== regime) return false;
            if (status && c.status !== status) return false;
            if (search && !c.razao.toLowerCase().includes(search)) return false;
            return true;
        });
        renderClientes(filtered);
    }

    // RENDER OBRIGAÇÕES TABLE
    function renderObrigacoesTable(data) {
        const tbody = document.getElementById('oblTableBody');
        tbody.innerHTML = '';
        data.forEach(o => {
            const statusLabel = o.status === 'entregue' ? 'Entregue' : o.status === 'pendente' ? 'Pendente' : 'Atrasado';
            const statusIcon = o.status === 'entregue' ? 'fa-check-circle' : o.status === 'pendente' ? 'fa-clock' : 'fa-exclamation-triangle';
            tbody.innerHTML += `<tr>
                <td><strong>${o.nome}</strong></td><td>${o.cliente}</td><td>${o.competencia}</td>
                <td>${o.vencimento}</td>
                <td><span class="status-badge ${o.status}"><i class="fas ${statusIcon}"></i> ${statusLabel}</span></td>
                <td>${o.responsavel}</td></tr>`;
        });
    }

    function filterObl(chip) {
        document.querySelectorAll('#oblFilterChips .filter-chip').forEach(c => c.classList.remove('active'));
        chip.classList.add('active');
        const filter = chip.dataset.filter;
        renderObrigacoesTable(filter === 'todos' ? obrigacoes : obrigacoes.filter(o => o.tipo === filter));
    }

    // CALENDAR
    let currentMonth = 1;
    let currentYear = 2026;
    const monthNames = ['Janeiro','Fevereiro','Março','Abril','Maio','Junho','Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'];
    const calendarEvents = {
        '2026-02-05': [{ nome: 'FGTS', status: 'entregue' }],
        '2026-02-07': [{ nome: 'FGTS Digital', status: 'entregue' }],
        '2026-02-10': [{ nome: 'GPS/INSS', status: 'entregue' }],
        '2026-02-14': [{ nome: 'EFD-Reinf', status: 'entregue' }],
        '2026-02-15': [{ nome: 'eSocial', status: 'entregue' }, { nome: 'DCTFWeb', status: 'entregue' }],
        '2026-02-20': [{ nome: 'DCTF', status: 'pendente' }, { nome: 'IRRF', status: 'pendente' }],
        '2026-02-21': [{ nome: 'DAS Simples', status: 'pendente' }],
        '2026-02-25': [{ nome: 'SPED Fiscal', status: 'pendente' }, { nome: 'EFD Contrib.', status: 'pendente' }, { nome: 'PIS/COFINS', status: 'atrasado' }],
        '2026-02-28': [{ nome: 'DIRF', status: 'atrasado' }, { nome: 'IRPJ/CSLL', status: 'atrasado' }],
    };

    function renderCalendar() {
        const grid = document.getElementById('calendarGrid');
        grid.innerHTML = '';
        document.getElementById('calendarMonthYear').textContent = `${monthNames[currentMonth]} ${currentYear}`;
        ['Dom','Seg','Ter','Qua','Qui','Sex','Sáb'].forEach(d => {
            grid.innerHTML += `<div class="calendar-day-header">${d}</div>`;
        });
        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        const today = new Date();
        for (let i = 0; i < firstDay; i++) grid.innerHTML += '<div class="calendar-day empty"></div>';
        for (let d = 1; d <= daysInMonth; d++) {
            const dateStr = `${currentYear}-${String(currentMonth+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            const isToday = today.getDate() === d && today.getMonth() === currentMonth && today.getFullYear() === currentYear;
            const events = calendarEvents[dateStr] || [];
            let eventsHtml = events.map(e => `<div class="calendar-event ${e.status}" title="${e.nome}">${e.nome}</div>`).join('');
            grid.innerHTML += `<div class="calendar-day ${isToday ? 'today' : ''}"><div class="day-number">${d}</div>${eventsHtml}</div>`;
        }
        const totalCells = firstDay + daysInMonth;
        const remainder = totalCells % 7;
        if (remainder > 0) for (let i = 0; i < 7 - remainder; i++) grid.innerHTML += '<div class="calendar-day empty"></div>';
    }

    function changeMonth(delta) {
        currentMonth += delta;
        if (currentMonth > 11) { currentMonth = 0; currentYear++; }
        if (currentMonth < 0) { currentMonth = 11; currentYear--; }
        renderCalendar();
    }

    // RENDER DOCUMENTS LIST
    function renderDocsList() {
        const container = document.getElementById('docsListContainer');
        container.innerHTML = '';
        documentos.forEach(doc => {
            const icon = doc.tipo === 'xml' ? 'fa-file-code' : doc.tipo === 'pdf' ? 'fa-file-pdf' : doc.tipo === 'xls' ? 'fa-file-excel' : 'fa-file-image';
            const statusBadge = doc.status === 'processado' ? 'active' : 'pending';
            const statusLabel = doc.status === 'processado' ? 'Processado' : doc.status === 'pendente' ? 'Pendente' : 'Processando...';
            container.innerHTML += `<div class="doc-list-item">
                <div class="doc-file-icon ${doc.tipo}"><i class="fas ${icon}"></i></div>
                <div class="doc-file-info"><div class="filename">${doc.nome}</div><div class="file-meta">${doc.cliente} · ${doc.tamanho} · ${doc.data}</div></div>
                <span class="status-badge ${statusBadge}" style="font-size:11px"><i class="fas fa-circle"></i> ${statusLabel}</span>
                <button class="btn btn-outline btn-sm" style="margin-left:8px" onclick="showToast('Download: ${doc.nome}','fas fa-download')"><i class="fas fa-download"></i></button>
            </div>`;
        });
    }

    // RENDER REVENUE TABLE
    function renderRevenueTable() {
        const tbody = document.getElementById('revenueTableBody');
        const sorted = [...clientes].filter(c => c.honorario > 0).sort((a,b) => b.honorario - a.honorario).slice(0,10);
        const totalAnual = sorted.reduce((s,c) => s + c.honorario * 12, 0);
        tbody.innerHTML = '';
        sorted.forEach((c, i) => {
            const anual = c.honorario * 12;
            const pct = ((anual / totalAnual) * 100).toFixed(1);
            const regimeLabel = c.regime === 'simples' ? 'Simples' : c.regime === 'presumido' ? 'Presumido' : 'Real';
            tbody.innerHTML += `<tr>
                <td style="font-weight:700;color:var(--text-muted)">${i+1}</td>
                <td><strong>${c.razao}</strong></td>
                <td><span class="regime-tag ${c.regime}">${regimeLabel}</span></td>
                <td class="honorario-value">R$ ${c.honorario.toLocaleString('pt-BR',{minimumFractionDigits:2})}</td>
                <td style="font-weight:700">R$ ${anual.toLocaleString('pt-BR',{minimumFractionDigits:2})}</td>
                <td><div style="display:flex;align-items:center;gap:8px">
                    <div style="flex:1;height:6px;background:#E2E8F0;border-radius:3px;max-width:80px"><div style="height:100%;width:${pct}%;background:var(--primary-light);border-radius:3px"></div></div>
                    <span style="font-size:12px;font-weight:600;color:var(--text-secondary)">${pct}%</span></div></td></tr>`;
        });
    }

    // RENDER FATURAS TABLE
    function renderFaturasTable() {
        const tbody = document.getElementById('faturasTableBody');
        tbody.innerHTML = '';
        faturas.forEach(f => {
            const statusIcon = f.status === 'pago' ? 'fa-check-circle' : f.status === 'aberto' ? 'fa-clock' : 'fa-exclamation-circle';
            const statusLabel = f.status === 'pago' ? 'Pago' : f.status === 'aberto' ? 'Em Aberto' : 'Vencido';
            tbody.innerHTML += `<tr>
                <td><span class="font-mono" style="font-weight:600">${f.numero}</span></td>
                <td>${f.cliente}</td>
                <td style="font-weight:700">R$ ${f.valor.toLocaleString('pt-BR',{minimumFractionDigits:2})}</td>
                <td>${f.emissao}</td><td>${f.vencimento}</td>
                <td><span class="fatura-status ${f.status}"><i class="fas ${statusIcon}"></i> ${statusLabel}</span></td>
                <td><button class="btn btn-outline btn-sm" onclick="showToast('Fatura ${f.numero}','fas fa-eye')"><i class="fas fa-eye"></i></button></td></tr>`;
        });
    }

    // PORTAL CHAT
    function sendChatMsg() {
        const input = document.getElementById('chatInput');
        const msg = input.value.trim();
        if (!msg) return;
        const container = document.getElementById('chatMessages');
        const now = new Date();
        const time = now.getHours().toString().padStart(2,'0') + ':' + now.getMinutes().toString().padStart(2,'0');
        container.innerHTML += `<div class="chat-msg sent"><div>${msg}</div><div class="msg-time">Agora, ${time}</div></div>`;
        input.value = '';
        container.scrollTop = container.scrollHeight;
        setTimeout(() => {
            const replies = ['Recebido! Vamos verificar e retornamos em breve.','Obrigado pela informação. Estamos processando.','Anotado! O departamento fiscal já foi notificado.','Perfeito, vamos dar andamento.','Entendido! Atualizaremos o status na plataforma.'];
            container.innerHTML += `<div class="chat-msg received"><div>${replies[Math.floor(Math.random()*replies.length)]}</div><div class="msg-time">Agora</div></div>`;
            container.scrollTop = container.scrollHeight;
        }, 1500);
    }

    function updatePortalView() {
        document.getElementById('portalCompanyName').textContent = document.getElementById('portalClienteSelect').value;
    }

    // CHARTS
    let chartsInitialized = { dashboard: false, financeiro: false };

    function initDashboardCharts() {
        if (chartsInitialized.dashboard) return;
        chartsInitialized.dashboard = true;
        const ctxH = document.getElementById('chartHonorarios').getContext('2d');
        new Chart(ctxH, {
            type: 'line',
            data: {
                labels: ['Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez','Jan','Fev'],
                datasets: [{
                    label: 'Receita (R$)',
                    data: [142000,148500,151200,155800,158400,162000,165300,169800,172500,178200,183900,187450],
                    borderColor: '#1E40AF', backgroundColor: 'rgba(30,64,175,0.08)', fill: true, tension: 0.4,
                    pointRadius: 4, pointBackgroundColor: '#1E40AF', pointBorderColor: '#fff', pointBorderWidth: 2, borderWidth: 2.5,
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: { backgroundColor: '#0F172A', padding: 12, cornerRadius: 8, callbacks: { label: ctx => 'R$ ' + ctx.parsed.y.toLocaleString('pt-BR') } } },
                scales: { y: { beginAtZero: false, grid: { color: '#F1F5F9' }, ticks: { callback: v => 'R$ ' + (v/1000).toFixed(0) + 'k', font: { size: 11 }, color: '#94A3B8' } }, x: { grid: { display: false }, ticks: { font: { size: 11 }, color: '#94A3B8' } } }
            }
        });
        const ctxO = document.getElementById('chartObrigacoes').getContext('2d');
        new Chart(ctxO, {
            type: 'doughnut',
            data: { labels: ['Entregues','Pendentes','Atrasadas'], datasets: [{ data: [186, 36, 12], backgroundColor: ['#059669','#D97706','#DC2626'], borderWidth: 0, hoverOffset: 8 }] },
            options: { responsive: true, maintainAspectRatio: false, cutout: '68%', plugins: { legend: { position: 'bottom', labels: { padding: 16, usePointStyle: true, pointStyle: 'circle', font: { size: 12, weight: '500' } } }, tooltip: { backgroundColor: '#0F172A', padding: 12, cornerRadius: 8 } } }
        });
    }

    function initFinanceCharts() {
        if (chartsInitialized.financeiro) return;
        chartsInitialized.financeiro = true;
        const ctxF = document.getElementById('chartFaturamento').getContext('2d');
        new Chart(ctxF, {
            type: 'bar',
            data: { labels: ['Set/25','Out/25','Nov/25','Dez/25','Jan/26','Fev/26'], datasets: [{ label: 'Faturamento', data: [165300,169800,172500,178200,183900,187450], backgroundColor: ['#93C5FD','#93C5FD','#93C5FD','#93C5FD','#3B82F6','#1E40AF'], borderRadius: 8, borderSkipped: false, barPercentage: 0.6 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { backgroundColor: '#0F172A', padding: 12, cornerRadius: 8, callbacks: { label: ctx => 'R$ ' + ctx.parsed.y.toLocaleString('pt-BR',{minimumFractionDigits:2}) } } }, scales: { y: { beginAtZero: false, grid: { color: '#F1F5F9' }, ticks: { callback: v => 'R$ ' + (v/1000).toFixed(0) + 'k', font: { size: 11 }, color: '#94A3B8' } }, x: { grid: { display: false }, ticks: { font: { size: 11 }, color: '#94A3B8' } } } }
        });
        const ctxR = document.getElementById('chartRegime').getContext('2d');
        const simplesTotal = clientes.filter(c=>c.regime==='simples'&&c.honorario>0).reduce((s,c)=>s+c.honorario,0);
        const presumidoTotal = clientes.filter(c=>c.regime==='presumido'&&c.honorario>0).reduce((s,c)=>s+c.honorario,0);
        const realTotal = clientes.filter(c=>c.regime==='real'&&c.honorario>0).reduce((s,c)=>s+c.honorario,0);
        new Chart(ctxR, {
            type: 'doughnut',
            data: { labels: ['Simples Nacional','Lucro Presumido','Lucro Real'], datasets: [{ data: [simplesTotal, presumidoTotal, realTotal], backgroundColor: ['#3B82F6','#7C3AED','#DC2626'], borderWidth: 0, hoverOffset: 8 }] },
            options: { responsive: true, maintainAspectRatio: false, cutout: '68%', plugins: { legend: { position: 'bottom', labels: { padding: 16, usePointStyle: true, pointStyle: 'circle', font: { size: 12, weight: '500' } } }, tooltip: { backgroundColor: '#0F172A', padding: 12, cornerRadius: 8, callbacks: { label: ctx => ctx.label + ': R$ ' + ctx.parsed.toLocaleString('pt-BR',{minimumFractionDigits:2}) } } } }
        });
    }

    // GLOBAL SEARCH
    document.getElementById('globalSearch').addEventListener('input', function(e) {
        const q = e.target.value.toLowerCase();
        if (q.length < 2) return;
        const match = clientes.find(c => c.razao.toLowerCase().includes(q) || c.cnpj.includes(q));
        if (match) { navigateTo('clientes'); document.getElementById('filterClienteSearch').value = q; filterClientes(); }
    });

    // KEYBOARD SHORTCUTS (1-6)
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) return;
        if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') return;
        const pages = ['dashboard','clientes','obrigacoes','documentos','financeiro','portal'];
        const idx = parseInt(e.key) - 1;
        if (idx >= 0 && idx < pages.length) navigateTo(pages[idx]);
    });

    // INIT
    document.addEventListener('DOMContentLoaded', function() {
        renderClientes(clientes);
        renderCalendar();
        renderObrigacoesTable(obrigacoes);
        renderDocsList();
        renderRevenueTable();
        renderFaturasTable();
        initDashboardCharts();
        setTimeout(() => {
            document.querySelectorAll('.progress-fill').forEach(bar => {
                const w = bar.style.width; bar.style.width = '0%';
                setTimeout(() => bar.style.width = w, 100);
            });
        }, 300);
    });

    </script>
</body>
</html>
